{"meta":{"title":"Hello_AlexCc","subtitle":"No pains, no gains.","description":"Technology Blog","author":"Hello_AlexCc","url":"http://yoursite.com","root":"/"},"pages":[{"title":"About ME","date":"2022-03-30T02:53:37.000Z","updated":"2022-03-31T02:37:39.820Z","comments":false,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":"StoryA long time ago â€¦ A cat is sleepingï¼Œvery very deep sleepingâ€¦ Suddently, He find a mouse â€¦ God damn it, a so cute mouse! He donâ€™t want to eat he, play with he."}],"posts":[{"title":"ESM/ESBuild","slug":"ESM-ESBuild","date":"2022-09-13T09:11:35.000Z","updated":"2022-09-16T08:40:53.050Z","comments":true,"path":"/post/ESM-ESBuild.html","link":"","permalink":"http://yoursite.com/post/ESM-ESBuild.html","excerpt":"ç»§ CommonJSã€AMDã€CMD å‡ ç§æ¨¡å—åŒ–è§„èŒƒç”±ç¤¾åŒºæå‡ºåï¼ŒES 2015ï¼ˆES6ï¼‰åœ¨è¯­è¨€å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œä¸”å®ç°ç®€å•ï¼Œå¯ä»¥æ›¿ä»£CommonJSå’ŒAMDè§„èŒƒï¼Œæˆä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚","text":"ESModuleç»§ CommonJSã€AMDã€CMD å‡ ç§æ¨¡å—åŒ–è§„èŒƒç”±ç¤¾åŒºæå‡ºåï¼ŒES 2015ï¼ˆES6ï¼‰åœ¨è¯­è¨€å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œä¸”å®ç°ç®€å•ï¼Œå¯ä»¥æ›¿ä»£CommonJSå’ŒAMDè§„èŒƒï¼Œæˆä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ &lt;script type=&quot;module&quot;&gt; åŸç”Ÿæ”¯æŒ ESMã€‚ https://www.cnblogs.com/zhaojian-08/p/14385312.html å¯¼å…¥/å¯¼å‡º12345678// esm_index.jsexport const hello_world = 1export default function() &#123;&#125;&lt;script type=&quot;module&quot;&gt; import fn, &#123; hello_world &#125; from &#x27;./esm_index.js&#x27;&lt;/script&gt; åŠ¨æ€åŠ è½½123456789101112// dynamic-m.jsexport const dynamic_value = &#x27;åŠ¨æ€åŠ è½½&#x27;export default function() &#123; console.log(&#x27;default&#x27;)&#125;mport(&#x27;./dynamic-m.js&#x27;) .then(module =&gt; &#123; // module: &#123; default: fn, dynamic_value: &#x27;åŠ¨æ€åŠ è½½&#x27; &#125; console.log(&#x27;åŠ¨æ€&#x27;, module) &#125;) ESBuild https://esbuild.github.io/api/ ä»‹ç»: https://juejin.cn/post/6918927987056312327","categories":[],"tags":[{"name":"ESM ESModule ESBuild","slug":"ESM-ESModule-ESBuild","permalink":"http://yoursite.com/tags/ESM-ESModule-ESBuild/"}]},{"title":"æ·±å…¥æµ…å‡ºTypeScript","slug":"æ·±å…¥æµ…å‡ºTypeScript","date":"2022-09-09T02:35:36.000Z","updated":"2022-09-13T03:03:59.001Z","comments":true,"path":"/post/æ·±å…¥æµ…å‡ºTypeScript.html","link":"","permalink":"http://yoursite.com/post/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BATypeScript.html","excerpt":"TypeScript","text":"TypeScript.d.ts å’Œ declare æ˜¯å¹²å˜›ç”¨çš„å¦‚æœä¸€ä¸ªæ–‡ä»¶æœ‰æ‰©å±•å .d.tsï¼Œåˆ™è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå£°æ˜æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å£°æ˜å…¨å±€çš„ç±»å‹å®šä¹‰å’Œæ¥å£ï¼Œæˆ–è€…æ˜¯å…¶å®ƒæ¨¡å—ã€‚æ¯”å¦‚ï¼š 1234567891011121314151617181920// global.d.ts// å£°æ˜æ¥å£declare interface Person &#123; name: string; age: number;&#125;// å£°æ˜ç±»å‹ (åˆ«å)declare type TName = string;// å£°æ˜æ¨¡å—declare module &#x27;*.css&#x27;;declare module &#x27;*.less&#x27;;declare module &#x27;*.png&#x27;;// æ‹“å±• window å±æ€§ï¼Œåœ¨ window å¯¹è±¡ä¸Šæ˜¾å¼è®¾ç½®å±æ€§declare interface Window &#123; MyNameSpace: any&#125; ä½†æ˜¯ä¹Ÿä¸æ˜¯è¯´åˆ›å»ºäº†.d.tsæ–‡ä»¶ï¼Œé‡Œé¢å£°æ˜çš„ä¸œè¥¿å°±èƒ½ç”Ÿæ•ˆäº†ï¼Œæ¯•ç«Ÿå½’æ ¹åˆ°åº•ä¹Ÿæ˜¯.tsæ–‡ä»¶ï¼Œéœ€è¦é¢„ç¼–è¯‘ï¼Œæ‰€ä»¥éœ€è¦åœ¨tsconfig.jsonæ–‡ä»¶é‡Œé¢çš„includeæ•°ç»„é‡Œé¢æ·»åŠ  global.d.ts æ–‡ä»¶ã€‚ 1&quot;include&quot;: [&quot;src/**/*.ts&quot;, &quot;src/**/*.d.ts&quot;, &quot;src/**/*.tsx&quot;, &quot;src/**/*.vue&quot;] .d.ts æ–‡ä»¶ä¸­çš„é¡¶çº§å£°æ˜å¿…é¡»ä»¥ â€œdeclareâ€ æˆ– â€œexportâ€ ä¿®é¥°ç¬¦å¼€å¤´ã€‚é€šè¿‡declareå£°æ˜çš„ç±»å‹æˆ–è€…å˜é‡æˆ–è€…æ¨¡å—ï¼Œåœ¨includeåŒ…å«çš„æ–‡ä»¶èŒƒå›´å†…ï¼Œéƒ½å¯ä»¥ç›´æ¥å¼•ç”¨ã€‚ 12345// .vue setup / .tsconst me: Person = &#123; name: &#x27;alex.cheng&#x27;, age: 18&#125; æ³¨æ„.d.tsæ–‡ä»¶é¡¶çº§å£°æ˜declareæœ€å¥½ä¸è¦è·ŸexportåŒçº§ä½¿ç”¨ï¼Œä¸ç„¶åœ¨å…¶ä»–tsæ–‡ä»¶å¼•ç”¨è¿™ä¸ª.d.tsçš„å†…å®¹çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨importå¯¼å…¥äº†ã€‚ 12345678// global.d.tsexport type TName = string;// è¿™ä¸ªæ—¶å€™ï¼Œå¤–éƒ¨ ts å°±æ— æ³•ç›´æ¥ä½¿ç”¨ Person äº†ï¼Œéœ€è¦å¼•å…¥ import &#123; Person &#125; from &#x27;../global.d.ts&#x27;export declare interface Person &#123; name: string; age: number;&#125; ç»™å¯¹è±¡åˆ†é…åŠ¨æ€ï¼ˆæœªçŸ¥ï¼‰å±æ€§1234567891011121314const o: &#123; [key: string]: any &#125; = &#123;&#125;// ä½¿ç”¨ ts å†…ç½®å·¥å…· Recordï¼Œæ•ˆæœåŒä¸Šconst o: Record&lt;string, any&gt; = &#123;&#125;interface IPerson extends Record&lt;string, any&gt; &#123; name: string; age?: number;&#125;const me1: IPerson = &#123; name: &#x27;alex&#x27;, hair: &#x27;black&#x27;&#125; interface å’Œ type æœ‰ä»€ä¹ˆåŒºåˆ« æ¥å£å’Œç±»å‹åˆ«åéƒ½å¯ä»¥ç”¨æ¥æè¿°å¯¹è±¡çš„å½¢çŠ¶æˆ–å‡½æ•°ç­¾åã€‚ ä¸æ¥å£ç±»å‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œç±»å‹åˆ«åå¯ä»¥ç”¨äºä¸€äº›å…¶ä»–ç±»å‹ï¼Œæ¯”å¦‚åŸå§‹ç±»å‹ã€è”åˆç±»å‹ï¼ˆ|ï¼‰å’Œå…ƒç»„ã€‚ æ¥å£å’Œç±»å‹åˆ«åéƒ½èƒ½å¤Ÿè¢«æ‰©å±•ï¼Œä½†è¯­æ³•æœ‰æ‰€ä¸åŒã€‚æ­¤å¤–ï¼Œæ¥å£å’Œç±»å‹åˆ«åä¸æ˜¯äº’æ–¥çš„ã€‚æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼Œè€Œåè¿‡æ¥æ˜¯ä¸è¡Œçš„ã€‚ interface æ‰©å±•ï¼ˆæ¥å£ã€ç±»å‹ï¼‰ä½¿ç”¨ extends å…³é”®å­—ï¼Œç±»å‹åˆ«åæ‰©å±•ï¼ˆæ¥å£ã€ç±»å‹ï¼‰ä½¿ç”¨çš„æ˜¯ äº¤å‰ç±»å‹ï¼ˆ&amp;ï¼‰: 123456789101112131415// æ¥å£æ‰©å±•interface IPerson &#123; name: string;&#125;interface IMe extends IPerson &#123; age: number;&#125;// ç±»å‹æ‰©å±•type TPerson = &#123; name: string;&#125;type TMe = TPerson &amp; &#123; age: number;&#125; ç±»å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼å®ç°(implements)æ¥å£æˆ–ç±»å‹åˆ«åï¼Œä½†ç±»ä¸èƒ½å®ç°ä½¿ç”¨ç±»å‹åˆ«åå®šä¹‰çš„è”åˆç±»å‹ 12345678910111213// Error:type PartialPoint = &#123; x: number; &#125; | &#123; y: number; &#125;;class SomePartialPoint implements PartialPoint &#123; // ç±»åªèƒ½å®ç°å…·æœ‰é™æ€å·²çŸ¥æˆå‘˜çš„å¯¹è±¡ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„äº¤é›†ã€‚ts(2422) x = 1; y = 2;&#125;// Successtype PartialPoint = &#123; x: number; &#125; &amp; &#123; y: number; &#125;;class SomePartialPoint implements PartialPoint &#123; x = 1; y = 2;&#125; ä¸ç±»å‹åˆ«åä¸åŒï¼Œæ¥å£å¯ä»¥å®šä¹‰å¤šæ¬¡ï¼Œä¼šè¢«è‡ªåŠ¨åˆå¹¶ä¸ºå•ä¸ªæ¥å£ã€‚ 123456789101112interface IMerge &#123; a: 1;&#125;interface IMerge &#123; b: 2&#125;const ab: IMerge = &#123;&#125;; // ç±»å‹â€œ&#123;&#125;â€ç¼ºå°‘ç±»å‹â€œIMergeâ€ä¸­çš„ä»¥ä¸‹å±æ€§: a, bts(2739)// Error: æ ‡è¯†ç¬¦â€œTOneâ€é‡å¤ã€‚ts(2300)type TOne = string;type TOne = number; ç±»å‹ä¿æŠ¤ typeof instanceof in å‚è€ƒèµ„æ–™TS å­¦ä¹ æŒ‡å— â†©æ·±å…¥ç†è§£TypeScript â†©","categories":[],"tags":[{"name":"TypeScript TS","slug":"TypeScript-TS","permalink":"http://yoursite.com/tags/TypeScript-TS/"}]},{"title":"ç§»åŠ¨ç«¯å¼€å‘å®è·µ","slug":"app-h5","date":"2022-06-09T06:26:40.000Z","updated":"2022-06-09T06:44:26.042Z","comments":true,"path":"/post/app-h5.html","link":"","permalink":"http://yoursite.com/post/app-h5.html","excerpt":"React Native ã€H5ç§»åŠ¨ç«¯å¼€å‘å®è·µ","text":"WebViewç°åœ¨ Android Appå¤§å¤šåµŒå…¥äº† Android Webview ç»„ä»¶è¿›è¡Œ Hybrid å¼€å‘ï¼Œå®ƒå…·å¤‡å¼€å‘å‘¨æœŸçŸ­ã€çµæ´»æ€§å¥½çš„ä¼˜ç‚¹ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼ŒåŠ è½½é€Ÿåº¦æ…¢ &amp; æ¶ˆè€—æµé‡ã€‚å¼•èµ·ç¼ºç‚¹çš„ä¸»è¦åŸå› å¦‚ä¸‹ï¼š jsè§£ææ•ˆç‡ï¼Œä»¥åŠæ‰‹æœºç¡¬ä»¶è®¾å¤‡çš„æ€§èƒ½ é¡µé¢èµ„æºçš„ä¸‹è½½ï¼ˆå›¾ç‰‡ã€jsæ–‡ä»¶ã€cssæ–‡ä»¶ï¼‰ å‚è€ƒèµ„æ–™Android Webview H5 ç§’å¼€æ–¹æ¡ˆå®ç° â†©","categories":[],"tags":[{"name":"RN H5","slug":"RN-H5","permalink":"http://yoursite.com/tags/RN-H5/"}]},{"title":"å¦‚ä½•ç¼–å†™é«˜æ ‡å‡†çš„ JavaScript ä»£ç ","slug":"js-advice","date":"2022-03-31T02:12:23.000Z","updated":"2022-04-08T02:42:23.957Z","comments":true,"path":"/post/js-advice.html","link":"","permalink":"http://yoursite.com/post/js-advice.html","excerpt":"ä»£ç é‡å°‘ï¼Œè¿è¡Œé€Ÿåº¦ä¸ä¸€å®šå¿«ï¼›ä»£ç é‡å¤šï¼Œè¿è¡Œé€Ÿåº¦ä¹Ÿä¸ä¸€å®šæ…¢ã€‚","text":"æ¦‚è¿°ä½ æ˜¯å¦æ›¾ç»ä¸ºäº†æä¾›ä¸€ä¸ªç®€å•çš„åº”ç”¨è§£å†³æ–¹æ¡ˆè€Œå½»å¤œåœ°æŸ¥çœ‹æºä»£ç ï¼Ÿä½ æ˜¯å¦æ›¾ç»ä¸ºäº†ç†è§£æŸä¸ªæ¡†æ¶è€Œå†¥æ€è‹¦æƒ³ã€é˜…è§ˆç¾¤ä¹¦ï¼Ÿä½ æ˜¯å¦æ›¾ç»ä¸ºäº†æå‡0.1sçš„DOMæ€§èƒ½è€Œå¯¹å¤šç§å®ç°æ–¹æ¡ˆè¿›è¡Œä¸¥æ ¼æµ‹è¯•å’Œå¯¹æ¯”ï¼Ÿä½ æ˜¯å¦æ›¾ç»ä¸ºäº†é¿å…å…¼å®¹é—®é¢˜è€Œéå¯»é«˜æ‰‹å…±åŒâ€œè¯Šæ²»â€ï¼Ÿ è·Ÿæˆ‘ä¸€èµ·ï¼Œä¸“æ³¨é«˜è´¨é‡ JavaScript ä»£ç ï¼Œå°‘å‡º BugğŸ›ï¼Œæ—©ä¸‹ç­ ! æœŸæœ›ä¸ºè¯»è€…å¸¦æ¥å¦‚ä¸‹å¸®åŠ© ğŸ“šï¼š â‘ èƒ½å†™å‡ºç®€å•ã€æ¸…æ™°ã€é«˜æ•ˆçš„ä»£ç ã€‚ â‘ èƒ½æ­å»ºä¸€ä¸ªç¨³å®šã€å¥å£®ã€å¿«æ·çš„åº”ç”¨æ¡†æ¶ã€‚ â‘ èƒ½å›ç­”ä¸€ä¸ªå›°æ‰°å¾ˆå¤šäººçš„æŠ€æœ¯é—®é¢˜ã€‚ â‘ èƒ½ä¿®å¤ä¸€ä¸ªåº”ç”¨å¼€å‘ä¸­é‡åˆ°çš„å¤§çš„Bugã€‚ â‘ èƒ½éå¸¸ç†Ÿæ‚‰æŸä¸ªå¼€æºäº§å“ã€‚ â‘ èƒ½æå‡å®¢æˆ·ç«¯åº”ç”¨æ€§èƒ½ã€‚ JavaScript åŸºç¡€ä»£ç é‡å°‘ï¼Œè¿è¡Œé€Ÿåº¦ä¸ä¸€å®šå¿«ï¼›ä»£ç é‡å¤šï¼Œè¿è¡Œé€Ÿåº¦ä¹Ÿä¸ä¸€å®šæ…¢ã€‚ å‡å°‘å…¨å±€å˜é‡ å¤šä¸ªå…¨å±€å˜é‡éƒ½è¿½åŠ åœ¨ä¸€ä¸ªåç§°ç©ºé—´ä¸‹ï¼Œå°†æ˜¾è‘—é™ä½ä¸å…¶ä»–åº”ç”¨ç¨‹åºäº§ç”Ÿå†²çªçš„æ¦‚ç‡ 123const namespace = &#123;&#125;namespace.name = &#x27;my namespace&#x27; ä½¿ç”¨é—­åŒ…ä½“å°†ä¿¡æ¯éšè—ï¼Œå®ƒæ˜¯å¦ä¸€ç§æœ‰æ•ˆå‡å°‘â€œå…¨å±€æ±¡æŸ“â€çš„æ–¹æ³•ã€‚ 1234567const sayName = function() &#123; const name = &#x27;closure&#x27; return function() &#123; alert(name) &#125;&#125;() ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡ä¸å‚æ•°çš„å¯è§æ€§åŠç”Ÿå‘½å‘¨æœŸã€‚ JavaScriptæ”¯æŒå‡½æ•°ä½œç”¨åŸŸï¼Œå®šä¹‰åœ¨å‡½æ•°ä¸­çš„å‚æ•°å’Œå˜é‡åœ¨å‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå‡½æ•°ä¸­çš„ä»»ä½•ä½ç½®å®šä¹‰çš„å˜é‡åœ¨è¯¥å‡½æ•°ä¸­çš„ä»»ä½•åœ°æ–¹éƒ½å¯è§ã€‚å®ƒä¸ä»…å‡å°‘äº†åç§°å†²çªï¼Œå¹¶ä¸”æä¾›äº†è‡ªåŠ¨å†…å­˜ç®¡ç†ã€‚ ES6 æ¨¡å—åŒ–ç¼–ç¨‹ä¸­æ¯ä¸ª js æ–‡ä»¶å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœå¤–éƒ¨éœ€è¦æ¨¡å—å†…éƒ¨å˜é‡ï¼Œé€šè¿‡ export å¯¼å‡ºã€‚ 1234567891011&lt;script&gt; var windowA = &#x27;window a&#x27; console.log(window.windowA) // è¾“å‡º &#x27;window a&#x27;&lt;/script&gt;&lt;script type=&quot;module&quot;&gt; var moduleA = &#x27;module a&#x27; console.log(window.moduleA) // è¾“å‡º undefined&lt;/script&gt; è°¨æ…JSæ•°æ®ç±»å‹åœ¨è‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹æ—¶ï¼ŒJavaScriptä¸€èˆ¬éµå¾ªï¼šå¦‚æœæŸä¸ªç±»å‹çš„å€¼è¢«ç”¨äºéœ€è¦å…¶ä»–ç±»å‹çš„å€¼çš„ç¯å¢ƒä¸­ï¼ŒJavaScriptå°±è‡ªåŠ¨å°†è¿™ä¸ªå€¼è½¬æ¢æˆæ‰€éœ€è¦çš„ç±»å‹ã€‚ ç±»å‹è½¬æ¢æ…ç”¨JavaScriptç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œæ³¨æ„è‡ªåŠ¨è½¬æ¢è§„åˆ™: å¦‚æœæŠŠéç©ºå¯¹è±¡ç”¨åœ¨é€»è¾‘è¿ç®—ç¯å¢ƒä¸­ï¼Œåˆ™å¯¹è±¡è¢«è½¬æ¢ä¸ºtrueã€‚æ­¤æ—¶çš„å¯¹è±¡åŒ…æ‹¬æ‰€æœ‰ç±»å‹çš„å¯¹è±¡ï¼Œå³ä½¿æ˜¯å€¼ä¸ºfalseçš„åŒ…è£…å¯¹è±¡ä¹Ÿè¢«è½¬æ¢ä¸ºtrueã€‚ æœæŠŠå¯¹è±¡ç”¨åœ¨æ•°å€¼è¿ç®—ç¯å¢ƒä¸­ï¼Œåˆ™å¯¹è±¡ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™è¿”å›å€¼ä¸ºNaNã€‚ å½“æ•°ç»„è¢«ç”¨åœ¨æ•°å€¼è¿ç®—ç¯å¢ƒä¸­æ—¶ï¼Œæ•°ç»„å°†æ ¹æ®åŒ…å«çš„å…ƒç´ æ¥å†³å®šè½¬æ¢çš„å€¼ã€‚å¦‚æœæ•°ç»„ä¸ºç©ºæ•°ç»„ï¼Œåˆ™è¢«è½¬æ¢ä¸ºæ•°å€¼0ã€‚å¦‚æœæ•°ç»„ä»…åŒ…å«ä¸€ä¸ªæ•°å­—å…ƒç´ ï¼Œåˆ™è¢«è½¬æ¢ä¸ºè¯¥æ•°å­—çš„æ•°å€¼ã€‚å¦‚æœæ•°ç»„åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œæˆ–è€…ä»…åŒ…å«ä¸€ä¸ªéæ•°å­—å…ƒç´ ï¼Œåˆ™è¿”å›NaNã€‚ ğŸŒ° 123456789101112// å¯¹è±¡const obj = &#123;&#125;obj &amp;&amp; 1 &gt;&gt; 1obj + 1 &gt;&gt; &#x27;[object Object]1&#x27;obj.valueOf = function() &#123; return 99 &#125;obj + 1 &gt;&gt; 100// æ•°ç»„è‡ªåŠ¨è½¬æ¢è§„åˆ™+[] &gt;&gt; 0+[1] &gt;&gt; 1+[1,2] &gt;&gt; NaN ç±»å‹åˆ¤æ–­ typeofå¯¹äºä»»ä½•å˜é‡æ¥è¯´ï¼Œä½¿ç”¨typeofè¿ç®—ç¬¦æ€»æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ä»¥ä¸‹6ç§ç±»å‹ä¹‹ä¸€ï¼šâ‘ â€œnumberâ€â‘ â€œstringâ€â‘ â€œbooleanâ€â‘ â€œobjectâ€â‘ â€œfunctionâ€â‘ â€œundefinedâ€ ä»¤äººç–‘æƒ‘çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ typeof æ£€æµ‹nullå€¼æ—¶ï¼Œè¿”å›çš„æ˜¯â€œobjectâ€ï¼Œè€Œä¸æ˜¯â€œnullâ€ã€‚ 12345typeof null &gt;&gt; &#x27;object&#x27;typeof [] &gt;&gt; &#x27;object&#x27;typeof &#123;&#125; &gt;&gt; &#x27;object&#x27; instanceof instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚ è¿™ä¸ªåœ¨åˆ¤æ–­å¯¹è±¡æ—¶å­˜åœ¨ä¸€äº›ä¸ç¡®å®šæ€§ï¼Œæ¥çœ‹ä¸‹ä¾‹å­ï¼š ğŸŒ° 123456function Person(name) &#123; this.name = name&#125;const p = new Person(&#x27;hello&#x27;)p instanceof Person &gt;&gt; truep instanceof Object &gt;&gt; true å†çœ‹ä¸€ä¸ªğŸŒ°: 123456789101112131415function Person(name) &#123; this.name = name&#125;function Child(name) &#123; this.name = name&#125;Child.prototype = Person.prototypeChild.prototype.constructor = Childconst p = new Child(&#x27;hello child&#x27;)p instanceof Person &gt;&gt; truep instanceof Object &gt;&gt; true å¦‚æœæ˜¯åˆ¤æ–­æ•°ç»„å‘¢? 1234567[] instanceof Array &gt;&gt; true[] instanceof Object &gt;&gt; true// å½“ç„¶è¿™ç§æ–¹å¼å­˜åœ¨ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Array.isArray() æ–¹æ³•æ¥åˆ¤æ–­Array.isArray([]) &gt;&gt; trueArray.isArray(&#123;&#125;) &gt;&gt; false ä»ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ instanceof æ¥åˆ¤æ–­æ—¶å­˜åœ¨ç§ç§ä¸ç¡®å®šæ€§ï¼Œåªè¦å‡ºç°åœ¨åŸå‹é“¾ä¸Šçš„å¯¹è±¡éƒ½ä¼šè¿”å› trueï¼Œä½¿ç”¨çš„æ—¶å€™è¿˜éœ€è¦ç€é‡æ³¨æ„ï¼ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œæƒ³å¿…å¤§å®¶åº”è¯¥æƒ³èµ·æ¥äº†ï¼ Objectç±»æ˜¯æ‰€æœ‰å¯¹è±¡ç±»å‹çš„çš„çˆ¶ç±»! toString() æ–¹æ³• æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª toString() æ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªæ–‡æœ¬å€¼æ—¶ï¼Œæˆ–è€…ä¸€ä¸ªå¯¹è±¡ä»¥é¢„æœŸçš„å­—ç¬¦ä¸²æ–¹å¼å¼•ç”¨æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒtoString() æ–¹æ³•è¢«æ¯ä¸ª Object å¯¹è±¡ç»§æ‰¿ã€‚å¦‚æœæ­¤æ–¹æ³•åœ¨è‡ªå®šä¹‰å¯¹è±¡ä¸­æœªè¢«è¦†ç›–ï¼ŒtoString() è¿”å› â€œ[object type]â€ï¼Œå…¶ä¸­ type æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚ toString() æ–¹æ³•ï¼Œå®ƒå®šä¹‰åœ¨ Object çš„åŸå‹å¯¹è±¡ä¸Šï¼Œå¯¹è±¡åœ¨è°ƒç”¨æ—¶ä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚ ä½¿ç”¨ toString() æ–¹æ³•æ£€æµ‹å¯¹è±¡ç±»å‹æ˜¯æœ€å®‰å…¨ã€æœ€å‡†ç¡®çš„ã€‚è°ƒç”¨toString()æ–¹æ³•æŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æ•°ç»„æ‰€ç‰¹æœ‰çš„æ ‡å¿—å­—ç¬¦å¯ä»¥ç¡®å®šå¯¹è±¡çš„ç±»å‹ã€‚ ä¸ºä»€ä¹ˆè¯´ toString æ–¹æ³•ç”¨æ¥æ£€æµ‹å¯¹è±¡ç±»å‹æ˜¯æœ€å®‰å…¨ã€æœ€å‡†ç¡®çš„ï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥çœ‹å§~ å…ˆçœ‹çœ‹åœ¨å¯¹è±¡ä¸Šç›´æ¥ä½¿ç”¨ toStringä¼šæ˜¯ä»€ä¹ˆç»“æœï¼š 1234567891011121314const obj = &#123; a: 1 &#125;const arr = [1, 2]obj.toString() &gt;&gt; &#x27;[object Object]&#x27;// å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œåˆ™è¾“å‡ºå­—ç¬¦ä¸²arr.toString() &gt;&gt; &#x27;1,2&#x27;// å½“ç„¶æˆ‘ä»¬å¯ä»¥é‡å†™/è¦†ç›–åŸå‹é“¾ä¸Šçš„ toString æ–¹æ³•obj.toString = function() &#123; return &#x27;overwrite&#x27;&#125;obj.toString() &gt;&gt; &#x27;overwrite&#x27; æ—¢ç„¶ toString æ–¹æ³•å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚æœå•ç‹¬è°ƒç”¨å®ƒï¼Œä¼šæ˜¯ä»€ä¹ˆç»“æœå‘¢? 1Object.prototype.toString() &gt;&gt; &#x27;[object Object]&#x27; å¦‚æœé€šè¿‡ call/apply æ–¹æ³•ï¼Œæ”¹å˜ toString æ–¹æ³•å†…éƒ¨çš„ this æ‰§è¡Œï¼Œåˆä¼šæ˜¯ä»€ä¹ˆç»“æœå‘¢? çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼Œæˆ‘ç›¸ä¿¡è¿™ç»å¯¹å¯ä»¥å®Œç¾ cover ä½é¡¹ç›®é‡Œé¢æ‰€æœ‰çš„ç±»å‹åˆ¤æ–­äº†ï¼æ‰€ä»¥è¯´å®ƒæ˜¯æœ€å®‰å…¨ã€æœ€å‡†ç¡®çš„ç±»å‹åˆ¤æ–­ï¼Œæ²¡æœ‰å¼‚è®®å§ğŸ˜ 12345678910111213141516171819202122Object.prototype.toString.call(&#123;&#125;) &gt;&gt; &#x27;[object Object]&#x27;Object.prototype.toString.call([]) &gt;&gt; &#x27;[object Array]&#x27;Object.prototype.toString.call(function()&#123;&#125;) &gt;&gt; &#x27;[object Function]&#x27;Object.prototype.toString.call(&#x27;&#x27;) &gt;&gt; &#x27;[object String]&#x27;Object.prototype.toString.call(1) &gt;&gt; &#x27;[object Number]&#x27;Object.prototype.toString.call(true) &gt;&gt; &#x27;[object Boolean]&#x27;Object.prototype.toString.call(null) &gt;&gt; &#x27;[object Null]&#x27;Object.prototype.toString.call(undefined) &gt;&gt; &#x27;[object Undefined]&#x27;Object.prototype.toString.call() &gt;&gt; &#x27;[object Undefined]&#x27;Object.prototype.toString.call(new Date()) &gt;&gt; &#x27;[object Date]&#x27;Object.prototype.toString.call(/at/) &gt;&gt; &#x27;[object RegExp]&#x27; é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Œæˆ‘ä»¬æ¥æ‰’ä¸€æ‰’å®ƒçš„åŸç†ï¼åœ¨ toString æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹å‡ ä¸ªæ“ä½œæ­¥éª¤: è·å–thisæŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡çš„[[Class]]å±æ€§çš„å€¼ã€‚ï¼ˆcall/apply æ”¹å˜ this æŒ‡å‘ï¼‰ è®¡ç®—å‡ºä¸‰ä¸ªå­—ç¬¦ä¸²â€[object â€œã€ ç¬¬ä¸€æ­¥çš„æ“ä½œç»“æœã€ ä»¥åŠ â€œ]â€ è¿æ¥åçš„æ–°å­—ç¬¦ä¸²ã€‚ è¿”å›ç¬¬äºŒæ­¥çš„æ“ä½œç»“æœï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ &#39;[object Type]&#39; è¿™ç§æ ¼å¼å­—ç¬¦ä¸²ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„[[Class]]å±æ€§æ˜¯æ— æ³•ç›´æ¥è®¿é—®çš„ï¼Œå®ƒä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œæ‰€æœ‰çš„å¯¹è±¡(åŸç”Ÿå¯¹è±¡å’Œå®¿ä¸»å¯¹è±¡)éƒ½æ‹¥æœ‰è¯¥å±æ€§ï¼Œä¸”ä¸èƒ½è¢«ä»»ä½•äººä¿®æ”¹ã€‚åœ¨è§„èŒƒä¸­ï¼Œ[[Class]]æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼šå†…éƒ¨å±æ€§æè¿°ã€‚ å¦‚æœè¦å•ç‹¬æˆ–è€…å¯¹è±¡çš„ [[Class]]ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åš: 12const targetObj = []Object.prototype.toString.call(targetObj).slice(8, -1) &gt;&gt; &#x27;Array&#x27; æ—¢ç„¶å®ƒå¦‚æ­¤å¥½ç”¨ï¼Œéš¾é“å°±æ²¡æœ‰ç¼ºç‚¹å—ï¼Ÿ ç­”æ¡ˆæ˜¯å½“ç„¶æœ‰çš„ï¼Œæ¯•ç«Ÿå‡¡äº‹éƒ½ä¸å¯èƒ½é‚£ä¹ˆç»å¯¹çš„å˜›ï¼ é‚£ä¹ˆç¼ºç‚¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç¬¬ä¸€ï¼ŒtoString() ä¼šè¿›è¡Œè£…ç®±æ“ä½œï¼Œäº§ç”Ÿå¾ˆå¤šä¸´æ—¶å¯¹è±¡ã€‚ï¼ˆè£…ç®±å°±æ˜¯å°†åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œé€šè¿‡å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨å¼•ç”¨ç±»ä¸Šçš„æ–¹æ³•ï¼‰ 12345// ä½ è‚¯å®šä¸èƒ½è¿™æ ·ç”¨1.toString() &gt;&gt; SyntaxError: Invalid or unexpected token// ä½ å¿…é¡»è¿™æ ·ç”¨(1).toString() &gt;&gt; &#x27;1&#x27; ç¬¬äºŒï¼Œæ— æ³•åŒºåˆ†è‡ªå®šä¹‰å¯¹è±¡ç±»å‹ï¼Œç”¨æ¥åˆ¤æ–­è¿™ç±»å¯¹è±¡æ—¶ï¼Œè¿”å›çš„éƒ½æ˜¯Objectï¼Œè¿™æ ·æˆ‘ä»¬å°±éœ€è¦é€šè¿‡ instanceof æ¥åˆ¤æ–­äº†ã€‚ 1234function Person()&#123;&#125;const p = new Person()Object.prototype.toString.call(p) &gt;&gt; &#x27;[object Object]&#x27; å­—ç¬¦ä¸²JavaScriptè§£é‡Šå™¨å¼ºåˆ¶çº¦å®šå­—ç¬¦ä¸²åœ¨å †åŒºå­˜å‚¨çš„æ•°æ®æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaScriptè§£é‡Šå™¨å¼ºåˆ¶çº¦å®šå­—ç¬¦ä¸²åœ¨å †åŒºå­˜å‚¨çš„æ•°æ®æ˜¯ä¸å¯å˜çš„ã€‚ å‚è€ƒèµ„æ–™å‚è€ƒèµ„æ–™ â†©å‚è€ƒèµ„æ–™2 â†©","categories":[],"tags":[{"name":"JavaScript, ES6","slug":"JavaScript-ES6","permalink":"http://yoursite.com/tags/JavaScript-ES6/"}]},{"title":"React Hooks","slug":"react-hooks","date":"2022-03-26T10:41:01.000Z","updated":"2022-09-16T08:22:44.579Z","comments":true,"path":"/post/react-hooks.html","link":"","permalink":"http://yoursite.com/post/react-hooks.html","excerpt":"ä»€ä¹ˆæ˜¯React Hooksï¼Œä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿå¦‚ä½•é«˜æ•ˆçš„ä½¿ç”¨React Hooksï¼Ÿå¦‚ä½•è‡ªå®šä¹‰ Hooks ï¼Ÿå¦‚ä½•é€šè¿‡ Hooks åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ","text":"Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ åŠ¨æœºHook è§„åˆ™ åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hookã€‚ï¼ˆæˆ–ï¼šåœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å…¶ä»– Hookï¼‰ ä½¿ç”¨ useCallbackã€useMemoã€memo åšæ€§èƒ½ä¼˜åŒ–å°½å¯èƒ½çš„ä¿è¯ç»„ä»¶ä¸å»å‘ç”Ÿå˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–çš„å› ç´ æœ‰ï¼šstateã€propsã€contextã€‚ é‚£ä¹ˆ React æ˜¯å¦‚ä½•æ¯”è¾ƒè¿™ä¸‰è€…çš„å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ å†…å­˜åœ°å€ã€‚ æ¯”å¦‚è¯´ï¼Œå¯¹æ¯”ä¸€ä¸ª functionï¼Œå¯¹æ¯”çš„å°±æ˜¯è¿™ä¸ªå‡½æ•°åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œé€šè¿‡åœ°å€çš„åˆ¤æ–­ï¼Œä»è€Œåˆ¤æ–­ props æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ã€‚ React.memo https://react.docschina.org/docs/hooks-faq.html#how-do-i-implement-shouldcomponentupdate React.memo åŒ…è£¹ä¸€ä¸ªç»„ä»¶ï¼Œæ¥å¯¹å®ƒçš„ props è¿›è¡Œæµ…æ¯”è¾ƒã€‚ç­‰æ•ˆäº PureComponentï¼Œä½†å®ƒåªæ¯”è¾ƒ propsã€‚ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°æ¥æ¯”è¾ƒæ–°æ—§ propsã€‚å¦‚æœå‡½æ•°è¿”å› trueï¼Œå°±ä¼šè·³è¿‡æ›´æ–°ã€‚ï¼‰ 123456789101112131415161718192021222324// ä¸ä½¿ç”¨ memoï¼Œæ¯ä¸€æ¬¡ setCountï¼Œéƒ½ä¼šé€ æˆ Child ç»„ä»¶é‡æ–° renderconst Child = () =&gt; &#123; console.log(&#x27;Child&#x27;) return ( &lt;&gt;Child component&lt;/&gt; )&#125;const Demo = () =&gt; &#123; const [count, setCount] = useState(0) return ( &lt;&gt; &lt;button onClick=&#123;() =&gt; setCount(count =&gt; count + 1)&#125;&gt;+&lt;/button&gt; &lt;Child /&gt; &lt;/&gt; )&#125;// é€šè¿‡ memo åŒ…è£¹åï¼ŒChild ç»„ä»¶ä¸ä¼šå†é‡æ–° renderäº†ã€‚const Child = memo(() =&gt; &#123; console.log(&#x27;Child&#x27;) return ( &lt;&gt;Child component&lt;/&gt; )&#125;) å½“ memo æ„ŸçŸ¥ props æ²¡æœ‰å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸ä¼šé‡æ–° render ç»„ä»¶ã€‚å¦‚æœä¼ å…¥ count è¿›æ¥ï¼ŒChildç»„ä»¶å°±ä¼šé‡æ–° renderã€‚ æ€»ç»“ï¼š å¦‚æœæˆ‘ä»¬å°† setCount å½“åš prop ä¼ å…¥è¿›æ¥ï¼ŒChild ä¸ä¼šé‡æ–°renderï¼ˆå› ä¸º setCount åœ¨å†…å­˜ä¸­çš„åœ°å€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼‰ å¦‚æœä¼ å…¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ–¹æ³• (fn)è¿›æ¥ï¼ŒChildä¼šé‡æ–° renderï¼Œå› ä¸º Demo ç»„ä»¶æ¯æ¬¡æ›´æ–° count åï¼Œé‡æ–°ç”Ÿæˆäº† fn å‡½æ•°ã€‚ åªæ˜¯ä¼ äº†ä¸ª fn ï¼Œä¸æƒ³è®© Child ç»„ä»¶æ›´æ–°æ€ä¹ˆåŠï¼Ÿé‚£å°±è¦ç”¨åˆ° useCallback é’©å­äº† useMemoæŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useMemoï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—ã€‚ 1234// åªæœ‰å½“ count å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—const computedCount = useMemo(() =&gt; &#123; return count * 2&#125;, [count]) useMemo ä¹Ÿå…è®¸ä½ è·³è¿‡ä¸€æ¬¡å­èŠ‚ç‚¹çš„æ˜‚è´µçš„é‡æ–°æ¸²æŸ“ï¼Œæ¯”å¦‚ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦ä¸€æ¬¡å¤§é‡çš„è®¡ç®—ï¼Œåç»­å°±ä¸ä¼šå†æ”¹å˜äº†ï¼š 123456789101112function Parent(&#123; a, b &#125;) &#123; // Only re-rendered if `a` changes: const child1 = useMemo(() =&gt; &lt;Child1 a=&#123;a&#125; /&gt;, [a]); // Only re-rendered if `b` changes: const child2 = useMemo(() =&gt; &lt;Child2 b=&#123;b&#125; /&gt;, [b]); return ( &lt;&gt; &#123;child1&#125; &#123;child2&#125; &lt;/&gt; )&#125; useCallbackæŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useCallbackï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå³ä½¿æˆ‘ä»¬ç”¨ memo åŒ…è£¹äº†ç»„ä»¶ï¼Œå› ä¸º setCount æ¯æ¬¡ä¼šå¼•èµ· Demo ç»„ä»¶é‡æ–° renderï¼Œç”Ÿæˆäº†æ–°çš„ fn å‡½æ•°(å†…å­˜åœ°å€å‘ç”Ÿäº†å˜åŒ–)ï¼Œå¯¼è‡´ Child ä¹Ÿä¼šé‡æ–° renderã€‚ 123456789101112131415161718192021interface IChild &#123; fn: React.Dispatch&lt;React.SetStateAction&lt;number&gt;&gt;&#125;const Child = memo((props: IChild) =&gt; &#123; console.log(&#x27;Child&#x27;) return ( &lt;&gt;Child component&lt;/&gt; )&#125;)const Demo = () =&gt; &#123; const [count, setCount] = useState(0) const fn = () =&gt; console.log(&#x27;is fn&#x27;) return ( &lt;&gt; &lt;button onClick=&#123;() =&gt; setCount(count =&gt; count + 1)&#125;&gt;+&lt;/button&gt; &lt;Child fn=&#123;fn&#125; /&gt; &lt;/&gt; )&#125; æˆ‘ä»¬ä¸æƒ³è®© fn å‡½æ•°çš„ å†…å­˜åœ°å€ å‘ç”Ÿå˜åŒ–ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿä½¿ç”¨ useCallback é’©å­å°†å…¶åŒ…è£¹èµ·æ¥å³å¯ã€‚ æ³¨æ„ï¼šuseMemo ä¹Ÿå¯ä»¥è¿™æ ·ç”¨ï¼Œç¼“å­˜ fnï¼Œä»è€Œä½¿å¾— Child ç»„ä»¶ä¸ä¼šé‡å¤ renderã€‚ 1234567// çœç•¥...const fn = useCallback(() =&gt; &#123; console.log(&#x27;is fn&#x27;)&#125;, [])// çœç•¥... è¿™æ · fn å‡½æ•°å°±æ˜¯ä¸€ä¸ªç¼“å­˜å‡½æ•°äº†ï¼Œå³ä½¿ count ä¸åœçš„å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¸ä¼šé€ æˆ Child ç»„ä»¶é‡å¤ renderã€‚ æ€»ç»“: å½“ Demo ç»„ä»¶å†…éƒ¨ state å‘ç”Ÿäº†æ”¹å˜å¼•èµ· Demo å’Œ Child ç»„ä»¶é‡æ–° render å¹¶ä¸” Child ç»„ä»¶æ¥å—äº†ä¸€ä¸ªæ¥è‡ª Demo ç»„ä»¶è‡ªå®šä¹‰çš„æ–¹æ³•ï¼ˆfnï¼‰ å¦‚æœä¸å¸Œæœ› Child ç»„ä»¶é‡æ–° renderï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨ useCallback é’©å­å°†è‡ªå®šä¹‰æ–¹æ³• fn åŒ…è£¹èµ·æ¥ å› ä¸º Child ç»„ä»¶ props é‡Œé¢çš„ fn å’Œ useCallback è¿”å›çš„ fn æŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªåœ°å€ï¼Œé‚£ä¹ˆ Child ç»„ä»¶å°±ä¸ä¼šæ›´æ–° useCallback è¿”å›æ–°å‡½æ•°çš„æ¡ä»¶æ˜¯ï¼šä¾èµ–é¡¹ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰å‘ç”Ÿäº†æ”¹å˜ã€‚ å¦‚æœè¯´æˆ‘ä»¬çš„ Child ç»„ä»¶ï¼Œæœ¬èº«å°±æ˜¯éœ€è¦æ ¹æ® count å˜åŒ–è€Œå˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åŠ è¿™ä¸ªç¼“å­˜ APIäº†ï¼Œåè€Œå¢åŠ å…¶è®¡ç®—è´Ÿæ‹…ã€‚ è®¾è®¡ç»„ä»¶ä¸è¦ä¸ºäº†ä½¿ç”¨é’©å­ï¼Œè¿‡æ¸¡çš„ä½¿ç”¨é’©å­ï¼Œå¥½çš„é¡µé¢è®¾è®¡ï¼Œä¹Ÿè®¸ç”¨ä¸ä¸Šè¿™äº›é’©å­ã€‚ æŠŠä¸å˜çš„ç»„ä»¶å’Œå˜åŒ–çš„ç»„ä»¶æŠ½ç¦»å‡ºæ¥ï¼ æ¯”å¦‚å¯ä»¥æŠŠ count ç›¸å…³éƒ¨åˆ†æŠ½ç¦»æˆä¸€ä¸ª Count ç»„ä»¶ï¼Œä½¿å…¶å’Œ Child ç»„ä»¶åŒå±‚çº§æ’åˆ—ï¼ŒCount ç»„ä»¶å’Œ Child ç»„ä»¶åˆ†å¼€äº†ï¼Œä¹Ÿä¸ä¼šå¼•èµ· Child ç»„ä»¶åšå¤šä½™çš„ renderã€‚ 12&lt;Count /&gt;&lt;Child prop=&#123;fn&#125; /&gt; æˆ–è€…æ˜¯é€šè¿‡ props.children æ¸²æŸ“ Childï¼Œä¹Ÿä¸ä¼šé€ æˆ Child é‡æ–° renderã€‚ 12345678910111213141516171819202122const Count = (props: any) =&gt; &#123; const [count, setCount] = useState(0) return ( &lt;&gt; &lt;button onClick=&#123;() =&gt; setCount(count =&gt; count + 1)&#125;&gt;+&lt;/button&gt; &#123;/* children ä¸ä¼šé‡æ–° render */&#125; &#123;props.children&#125; &lt;/&gt; )&#125;const Demo = () =&gt; &#123; // fn æ°¸è¿œä¸ä¼šå˜åŒ– const fn = () =&gt; &#123;&#125; return ( &lt;&gt; &lt;Count&gt; &lt;Child fn=&#123;fn&#125; /&gt; &lt;/Count&gt; &lt;/&gt; )&#125; useRef / createRef è®¿é—® DOM èŠ‚ç‚¹ 123456const inputEle = useRef(null)const inputEle = React.createRef()inputEle.current.focus() æµ‹é‡ DOMèŠ‚ç‚¹ï¼Ÿ1234567891011121314151617const getHeight = useMemo(() =&gt; &#123; return (node: HTMLObjectElement) =&gt; &#123; if (node) &#123; setHeight(node.getBoundingClientRect().height) &#125; &#125;&#125;, [])// æˆ–è€…const getHeight = useCallback((node: HTMLObjectElement) =&gt; &#123; if (node) &#123; setHeight(node.getBoundingClientRect().height) &#125;&#125;, []) å°† ref é€»è¾‘æŠ½ç¦»æˆä¸€ä¸ª Hook 1234567891011121314151617181920// hookconst useClientRect = () =&gt; &#123; const [rect, setRect] = useState(null) const ref = useCallback(node =&gt; &#123; if (node) &#123; setRect(node.getBoundingClientRect()) &#125; &#125;, []) return [rect, ref]&#125;// ä½¿ç”¨const [rect, ref] = useClientRect()&lt;h1 ref=&#123;ref&#125;&gt;æ˜¯ H1 æ ‡ç­¾ &#123;count&#125;&lt;/h1&gt;&#123; rect &amp;&amp; &lt;span&gt;&#123;rect.height&#125;&lt;/span&gt;&#125; React.forwardRef React.forwardRef ä¼šåˆ›å»ºä¸€ä¸ªReactç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ 123456789const FancyInput = forwardRef((props, ref) =&gt; ( &lt;input ref=&#123;inputRef&#125; &#123;...props&#125; /&gt;))// è¿™æ ·å¯ä»¥æ‹¿åˆ° input å…ƒç´ äº†const inputEle = React.createRef()&lt;FancyInput ref=&#123;inputEle&#125; /&gt; useImperativeHandle useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚ 12345678910111213141516171819202122232425const FancyInput = forwardRef((props, ref) =&gt; &#123; const inputRef = useRef(); useImperativeHandle(ref, () =&gt; (&#123; focus: () =&gt; &#123; inputRef.current.focus(); &#125;, alert () &#123; alert(1) &#125; &#125;)); return &lt;input ref=&#123;inputRef&#125; &#123;...props&#125; /&gt;;&#125;)const inputEle = React.createRef()&lt;FancyInput ref=&#123;inputEle&#125; /&gt;// é€šè¿‡ inputEle è·å–åˆ° useImperativeHandle å®šä¹‰çš„æ–¹æ³•inputEle.current.focus()inputEle.current.alert() å‚è€ƒèµ„æ–™ahooks å®˜ç½‘ â†©","categories":[],"tags":[{"name":"Reactï¼ŒHooks","slug":"Reactï¼ŒHooks","permalink":"http://yoursite.com/tags/React%EF%BC%8CHooks/"}]},{"title":"Hello_AlexCc","slug":"first-article","date":"2019-07-29T15:37:50.000Z","updated":"2022-04-07T10:04:40.419Z","comments":true,"path":"/post/first-article.html","link":"","permalink":"http://yoursite.com/post/first-article.html","excerpt":"First Article","text":"What This is my first Blog. No.212345if (true) &#123; console.log(&quot;Hello_AlexCc!&quot;)&#125;return &quot;ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾&quot;","categories":[],"tags":[{"name":"One","slug":"One","permalink":"http://yoursite.com/tags/One/"}]}],"categories":[],"tags":[{"name":"ESM ESModule ESBuild","slug":"ESM-ESModule-ESBuild","permalink":"http://yoursite.com/tags/ESM-ESModule-ESBuild/"},{"name":"TypeScript TS","slug":"TypeScript-TS","permalink":"http://yoursite.com/tags/TypeScript-TS/"},{"name":"RN H5","slug":"RN-H5","permalink":"http://yoursite.com/tags/RN-H5/"},{"name":"JavaScript, ES6","slug":"JavaScript-ES6","permalink":"http://yoursite.com/tags/JavaScript-ES6/"},{"name":"Reactï¼ŒHooks","slug":"Reactï¼ŒHooks","permalink":"http://yoursite.com/tags/React%EF%BC%8CHooks/"},{"name":"One","slug":"One","permalink":"http://yoursite.com/tags/One/"}]}